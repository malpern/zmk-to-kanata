============================= test session starts ==============================
platform darwin -- Python 3.10.16, pytest-8.3.5, pluggy-1.5.0 -- /Volumes/FlashGordon/Dropbox/code/nicktokatana/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /Volumes/FlashGordon/Dropbox/code/nicktokatana
configfile: pyproject.toml
testpaths: tests
collecting ... collected 130 items

tests/dts/test_ast.py::test_dts_property_creation PASSED                 [  0%]
tests/dts/test_ast.py::test_dts_node_creation PASSED                     [  1%]
tests/dts/test_ast.py::test_dts_node_find PASSED                         [  2%]
tests/dts/test_ast.py::test_dts_root_creation PASSED                     [  3%]
tests/dts/test_ast.py::test_dts_root_label_map PASSED                    [  3%]
tests/dts/test_end_to_end.py::test_simple_keymap PASSED                  [  4%]
tests/dts/test_end_to_end.py::test_complex_keymap_with_behaviors PASSED  [  5%]
tests/dts/test_end_to_end.py::test_keymap_with_unicode PASSED            [  6%]
tests/dts/test_end_to_end.py::test_error_handling PASSED                 [  6%]
tests/dts/test_end_to_end.py::test_keymap_with_combos PASSED             [  7%]
tests/dts/test_end_to_end.py::test_keymap_with_conditional_layers PASSED [  8%]
tests/dts/test_extractor.py::test_extract_simple_keymap PASSED           [  9%]
tests/dts/test_extractor.py::test_extract_with_behaviors PASSED          [ 10%]
tests/dts/test_extractor.py::test_extract_multiple_layers PASSED         [ 10%]
tests/dts/test_extractor.py::test_extract_complex_bindings PASSED        [ 11%]
tests/dts/test_extractor.py::test_extract_invalid_content PASSED         [ 12%]
tests/dts/test_integration.py::test_full_pipeline_simple_keymap PASSED   [ 13%]
tests/dts/test_integration.py::test_full_pipeline_with_behaviors PASSED  [ 13%]
tests/dts/test_integration.py::test_full_pipeline_multiple_layers PASSED [ 14%]
tests/dts/test_integration.py::test_full_pipeline_complex_bindings PASSED [ 15%]
tests/dts/test_integration.py::test_full_pipeline_error_handling PASSED  [ 16%]
tests/dts/test_parser.py::test_parse_simple_dts PASSED                   [ 16%]
tests/dts/test_parser.py::test_parse_with_labels PASSED                  [ 17%]
tests/dts/test_parser.py::test_parse_with_references PASSED              [ 18%]
tests/dts/test_parser.py::test_parse_error_handling PASSED               [ 19%]
tests/dts/test_parser.py::test_parse_complex_dts PASSED                  [ 20%]
tests/dts/test_parser.py::test_parse_nested_nodes PASSED                 [ 20%]
tests/dts/test_parser.py::test_parse_multiple_labels PASSED              [ 21%]
tests/dts/test_parser.py::test_parse_complex_arrays PASSED               [ 22%]
tests/dts/test_parser.py::test_parse_boolean_properties PASSED           [ 23%]
tests/dts/test_parser.py::test_parse_empty_nodes_and_properties PASSED   [ 23%]
tests/dts/test_parser.py::test_parse_comments PASSED                     [ 24%]
tests/dts/test_parser.py::test_parse_zmk_specific_constructs PASSED      [ 25%]
tests/dts/test_parser.py::test_parse_array_with_mixed_cell_types_and_references PASSED [ 26%]
tests/dts/test_performance.py::test_preprocessor_performance PASSED      [ 26%]
tests/dts/test_performance.py::test_parser_performance PASSED            [ 27%]
tests/dts/test_performance.py::test_extractor_performance PASSED         [ 28%]
tests/dts/test_performance.py::test_full_pipeline_performance PASSED     [ 29%]
tests/dts/test_preprocessor.py::test_preprocessor_initialization PASSED  [ 30%]
tests/dts/test_preprocessor.py::test_preprocess_simple_file PASSED       [ 30%]
tests/dts/test_preprocessor.py::test_preprocess_with_matrix PASSED       [ 31%]
tests/dts/test_preprocessor.py::test_preprocess_with_includes PASSED     [ 32%]
tests/dts/test_preprocessor.py::test_preprocess_invalid_file PASSED      [ 33%]
tests/dts/test_preprocessor.py::test_preprocess_invalid_cpp_command PASSED [ 33%]
tests/dts/test_preprocessor.py::test_matrix_size_extraction PASSED       [ 34%]
tests/dts/test_preprocessor.py::test_preprocess_simple_keymap PASSED     [ 35%]
tests/dts/test_preprocessor.py::test_preprocess_with_include_paths PASSED [ 36%]
tests/dts/test_preprocessor.py::test_matrix_size_detection PASSED        [ 36%]
tests/dts/test_preprocessor.py::test_matrix_size_detection_no_matrix PASSED [ 37%]
tests/test_dts_parser.py::test_parse_simple_keymap PASSED                [ 38%]
tests/test_dts_parser.py::test_parse_large_keymap PASSED                 [ 39%]
tests/test_dts_parser.py::test_parse_simple_dts PASSED                   [ 40%]
tests/test_dts_parser.py::test_parse_with_labels PASSED                  [ 40%]
tests/test_dts_parser.py::test_parse_complex_bindings PASSED             [ 41%]
tests/test_dts_parser.py::test_parse_error_handling PASSED               [ 42%]
tests/test_dts_parser.py::test_parse_invalid_content PASSED              [ 43%]
tests/test_dts_parser.py::test_find_node PASSED                          [ 43%]
tests/test_dts_parser.py::test_ast_root_children_regressions[\n/ {\n    behaviors {\n        compatible = "zmk,behaviors";\n    };\n};\n/ {\n    keymap {\n        compatible = "zmk,keymap";\n    };\n};\n-expected_children0] PASSED [ 44%]
tests/test_dts_parser.py::test_ast_root_children_regressions[\n/ {\n    behaviors {\n        compatible = "zmk,behaviors";\n    };\n};\n{ keymap { compatible = "zmk,keymap"; }; };\n-expected_children1] PASSED [ 45%]
tests/test_dts_parser.py::test_ast_root_children_regressions[\n/ {\n    behaviors { compatible = "zmk,behaviors"; };\n    ; ;\n    keymap { compatible = "zmk,keymap"; };\n};\n-expected_children2] PASSED [ 46%]
tests/test_dts_parser.py::test_ast_root_children_regressions[\n# 0x1E /* 1 */ "/some/file"\n/ {\n    behaviors { compatible = "zmk,behaviors"; };\n    keymap { compatible = "zmk,keymap"; };\n};\n-expected_children3] PASSED [ 46%]
tests/test_dts_parser.py::test_ast_root_children_regressions[\n/ {\n    behaviors { compatible = "zmk,behaviors"; };\n    { keymap { compatible = "zmk,keymap"; }; }\n};\n-expected_children4] PASSED [ 47%]
tests/test_dts_parser.py::test_keymap_extraction PASSED                  [ 48%]
tests/test_dts_preprocessor.py::test_preprocessor PASSED                 [ 49%]
tests/test_dts_preprocessor.py::test_preprocessor_large_matrix PASSED    [ 50%]
tests/test_dts_preprocessor.py::test_preprocessor_error_handling PASSED  [ 50%]
tests/test_hold_tap_behavior.py::test_holdtap_happy_path PASSED          [ 51%]
tests/test_hold_tap_behavior.py::test_holdtap_type_errors PASSED         [ 52%]
tests/test_hold_tap_behavior.py::test_holdtapbinding_happy_path PASSED   [ 53%]
tests/test_hold_tap_behavior.py::test_holdtapbinding_type_errors PASSED  [ 53%]
tests/test_hold_tap_behavior.py::test_holdtapbehavior_happy_path PASSED  [ 54%]
tests/test_hold_tap_behavior.py::test_holdtapbehavior_type_errors PASSED [ 55%]
tests/test_holdtap_transformer.py::test_transformer_init PASSED          [ 56%]
tests/test_holdtap_transformer.py::test_transform_binding_happy_path PASSED [ 56%]
tests/test_holdtap_transformer.py::test_transform_binding_flavors PASSED [ 57%]
tests/test_holdtap_transformer.py::test_transform_binding_optional_params PASSED [ 58%]
tests/test_holdtap_transformer.py::test_transform_behavior_happy_path PASSED [ 59%]
tests/test_holdtap_transformer.py::test_transform_behavior_flavors PASSED [ 60%]
tests/test_holdtap_transformer.py::test_transform_behavior_optional_params PASSED [ 60%]
tests/test_holdtap_transformer.py::test_transform_binding_error_no_hold_tap PASSED [ 61%]
tests/test_holdtap_transformer.py::test_transform_binding_error_no_hold PASSED [ 62%]
tests/test_holdtap_transformer.py::test_transform_binding_error_no_tap PASSED [ 63%]
tests/test_kanata_converter.py::test_convert_simple_keymap PASSED        [ 63%]
tests/test_kanata_converter.py::test_convert_large_keymap PASSED         [ 64%]
tests/test_kanata_converter.py::test_convert_multiple_layers PASSED      [ 65%]
tests/test_kanata_converter.py::test_convert_invalid_key_code PASSED     [ 66%]
tests/test_kanata_converter.py::test_convert_invalid_key_type PASSED     [ 66%]
tests/test_kanata_converter.py::test_kanata_transformer_error_binding PASSED [ 67%]
tests/test_kanata_converter.py::test_kanata_transformer_nested_macro PASSED [ 68%]
tests/test_kanata_converter.py::test_kanata_transformer_malformed_macro PASSED [ 69%]
tests/test_kanata_converter.py::test_kanata_transformer_unknown_modifier_macro PASSED [ 70%]
tests/test_kanata_converter.py::test_kanata_transformer_no_duplicate_macros_or_aliases PASSED [ 70%]
tests/test_kanata_converter.py::test_simple_combo_full_pipeline PASSED   [ 71%]
tests/test_kanata_converter.py::test_custom_hold_tap_behavior_full_pipeline PASSED [ 72%]
tests/test_kanata_converter.py::test_unicode_macro_full_pipeline PASSED  [ 73%]
tests/test_keymap_model.py::test_binding_to_kanata_raises PASSED         [ 73%]
tests/test_keymap_model.py::test_global_settings_fields_and_equality PASSED [ 74%]
tests/test_keymap_model.py::test_holdtap_to_kanata_default PASSED        [ 75%]
tests/test_keymap_model.py::test_holdtap_to_kanata_flavors PASSED        [ 76%]
tests/test_keymap_model.py::test_holdtap_to_kanata_number_and_numpad PASSED [ 76%]
tests/test_keymap_model.py::test_holdtapbinding_equality_and_to_kanata PASSED [ 77%]
tests/test_keymap_model.py::test_keymapping_equality PASSED              [ 78%]
tests/test_keymap_model.py::test_keymapping_to_kanata_branches PASSED    [ 79%]
tests/test_keymap_model.py::test_keymapping_from_zmk_branches PASSED     [ 80%]
tests/test_keymap_model.py::test_layer_and_keymapconfig PASSED           [ 80%]
tests/test_main.py::test_main_simple_conversion_stdout PASSED            [ 81%]
tests/test_main.py::test_main_simple_conversion_outfile PASSED           [ 82%]
tests/test_main.py::test_main_with_include PASSED                        [ 83%]
tests/test_main.py::test_main_input_file_not_found PASSED                [ 83%]
tests/test_main.py::test_main_invalid_dts PASSED                         [ 84%]
tests/test_main.py::test_main_no_args PASSED                             [ 85%]
tests/test_main.py::test_main_help PASSED                                [ 86%]
tests/test_regression_real_world.py::test_golden_regression[tests/fixtures/real_world/card.keymap] SKIPPED [ 86%]
tests/test_regression_real_world.py::test_golden_regression[tests/fixtures/real_world/piano.keymap] SKIPPED [ 87%]
tests/test_regression_real_world.py::test_no_unsupported_features[tests/fixtures/real_world/card.keymap] PASSED [ 88%]
tests/test_regression_real_world.py::test_no_unsupported_features[tests/fixtures/real_world/piano.keymap] PASSED [ 89%]
tests/test_regression_real_world.py::test_no_long_lines_in_kanata_outputs[tests/fixtures/real_world/card.keymap] PASSED [ 90%]
tests/test_regression_real_world.py::test_no_long_lines_in_kanata_outputs[tests/fixtures/real_world/piano.keymap] PASSED [ 90%]
tests/test_sticky_key_transformer.py::test_sticky_key_transformer_init PASSED [ 91%]
tests/test_sticky_key_transformer.py::test_transform_binding_valid PASSED [ 92%]
tests/test_sticky_key_transformer.py::test_transform_binding_missing_params PASSED [ 93%]
tests/test_sticky_key_transformer.py::test_transform_binding_unknown_flavor PASSED [ 93%]
tests/test_unicode_behavior.py::test_unicodebinding_init_and_to_kanata PASSED [ 94%]
tests/test_unicode_behavior.py::test_unicodebinding_from_zmk_unicode PASSED [ 95%]
tests/test_unicode_behavior.py::test_unicodebinding_from_zmk_pi PASSED   [ 96%]
tests/test_unicode_behavior.py::test_unicodebinding_from_zmk_n_tilde PASSED [ 96%]
tests/test_unicode_behavior.py::test_unicodebinding_from_zmk_none PASSED [ 97%]
tests/test_unicode_behavior.py::test_is_unicode_binding_true PASSED      [ 98%]
tests/test_unicode_behavior.py::test_is_unicode_binding_false PASSED     [ 99%]
tests/test_unicode_behavior.py::test_unicodebinding_to_kanata_platform PASSED [100%]

======================== 128 passed, 2 skipped in 1.39s ========================
